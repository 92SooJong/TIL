# 쿠키
## 정의
- 쿠키는 **사용자를 식별**하고 **세션을 유지**하는 방식 중에서 가장 널리사용되고 있는 방식이다. 
- 대부분의 캐시나 브라우저에서는 쿠키에 있는 내용물을 캐싱하지 않는다. ( 브라우저나 캐시는 쿠키의 데이터를 기록하지 않는다. )
- 쿠키에 대한 정보는 사용자의 디스크에 저장된다.

## 쿠키의 타입
- 세션 쿠키와 지속 쿠키가 있으며, 두 쿠키의 차이점은 파기시점 뿐이다.
### 세션 쿠키(Session Cookie)
- 사용자가 사이트를 탐색할 때, 관련한 설정과 선호 사항들을 저장하는 임시 쿠키다.
- 사용자가 브라우저를 닫으면 삭제된다.

### 지속 쿠키(Persistent Cookie)
- 사용자가 브라우저를 닫아도 삭제되지 않고 더 길게 유지될 수 있다.
- **사용자의 디스크에 저장되어, 브라우저를 닫거나 컴퓨터를 재시작하더라도 남아있다.**
- 사용자가 주기적으로 방문하는 사이트에 대한 설정 정보나 로그인 이름을 유지하려고 사용한다.

## 쿠키의 동작원리 예시
- 처음에 사용자가 웹 사이트에 방문하면 웹 서버는 사용자에 대해서 아무것도 모른다.
- 웹 서버는 사용자가 들어왔을 때, 해당 사용자를 식별하기 위한 유일한 값을 쿠키에 할당한다.(Key=Value 방식)
- **쿠키는 Set-Cookie 또는 Set-Cookie2같은 HTTP 응답헤더에 기술되어 사용자에게 전달된다.**
- 브라우저는 쿠키 데이터베이스에 서버에서 보낸 쿠키정보를 저장한다. 사용자가 미래에 같은 사이트를 방문한다면 브라우저는 서버가 이 사용자에게 할당했던 쿠키를 Cookie 요청 헤더에 기술해 전송한다.
- 여기서 포인트는 *브라우저는 쿠키 정보를 저장할 책임이 있다*는 것이다. ( 크롬은 Cookies라는 SQLite 파일에 쿠키를 저장한다!)

# 세션
## 정의
- 쿠키와 달리 사용자 정보 파일을 서버측에 저장한다.

## 동작원리
- 사용자가 세션ID를 Header에 존재하는 쿠키에 담아 서버측으로 보낸다. 
- 서버측에서는 세션ID를 확인하고 존재하지 않으면, 세션ID를 생성하고 상태와 관련된 파일을 서버에 저장한다.
- 서버는 응답에 세션ID를 담아서 보낸다.
- 클라이언트는 이 세션ID가 담긴 쿠키를 디스크에 저장한다.
- 클라이언트는 다음번에 접속할때 쿠키에 있는 세션ID를 서버에 다시 요청하면 서버는 가지고 있던 상태를 클라이언트에게 던져준다.
