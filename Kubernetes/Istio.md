# Istio

Istio는 마이크로서비스 간의 트래픽 관리, 보안, 모니터링을 담당하는 오픈소스 서비스 메시(Service Mesh) 플랫폼이다.
애플리케이션 코드 수정 없이 사이드카 프록시인 Envoy를 통해 서비스 간 통신을 제어하고, 로드밸런싱, mTLS 암호화, 트래픽 라우팅, 장애 복구 등의 기능을 제공한다.


Service Mesh는 쿠버네티스의 기본 기능이 아닙니다. (Istio 외에도 Linkerd, Consul Connect 등이 있음)

쿠버네티스 위에 별도로 설치하는 추가 레이어임.
Istio는 Service Mesh를 구현한 여러 도구 중 하나


쿠버네티스 기본 구조:
- Control Plane: API Server, etcd, Scheduler, Controller Manager
- Data Plane: 워커 노드들 (kubelet, kube-proxy, Pod들)

Istio가 추가되면:
- Control Plane에 istiod 추가 → 트래픽 정책, 보안 설정 관리
- Data Plane의 각 Pod에 Envoy 사이드카 주입 → 실제 트래픽 제어

Pod 생성 될때 istiod가 자동으로 Envoy 사이드카를 주입!

```
┌─────────────────────────────────────────────────────────────────┐
│                      Control Plane                              │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │                        istiod                             │  │
│  │  ┌─────────────┐ ┌─────────────┐ ┌─────────────────────┐  │  │
│  │  │    Pilot    │ │   Citadel   │ │       Galley        │  │  │
│  │  │ (트래픽관리)   │ │  (보안/인증)  │ │    (설정 검증)        │  │  │
│  │  └─────────────┘ └─────────────┘ └─────────────────────┘  │  │
│  └───────────────────────────────────────────────────────────┘  │
│                              │                                  │
│                              │ 설정/정책/인증서 배포                 │
│                              ▼                                  │
├─────────────────────────────────────────────────────────────────┤
│                       Data Plane                                │
│                                                                 │
│   ┌─────────────────┐           ┌─────────────────┐             │
│   │      Pod A      │           │      Pod B      │             │
│   │ ┌─────────────┐ │           │ ┌─────────────┐ │             │
│   │ │   Service   │ │           │ │   Service   │ │             │
│   │ │      A      │ │           │ │      B      │ │             │
│   │ └──────┬──────┘ │           │ └──────┬──────┘ │             │
│   │        │        │           │        │        │             │
│   │ ┌──────▼──────┐ │  트래픽     │ ┌──────▼──────┐ │             │
│   │ │    Envoy    │◄├──────────►┤ │    Envoy    │ │             │
│   │ │  (Sidecar)  │ │           │ │  (Sidecar)  │ │             │
│   │ └─────────────┘ │           │ └─────────────┘ │             │
│   └─────────────────┘           └─────────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```